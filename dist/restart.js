// Generated by CoffeeScript 1.10.0
(function() {
  var checkCommandLineArguments, child_process, cli, exec, execSync, executeCommands, fs, main, path, process;

  child_process = require("child_process");

  process = require("process");

  path = require("path");

  fs = require("fs");

  cli = path.normalize(__dirname + "/../node_modules/azure-cli/bin/azure");

  exec = function(command, success) {
    return child_process.exec(command + " --json", function(error) {
      if (error !== null) {
        console.log(error.message);
        process.exit(1);
      }
      console.log("Done: " + command);
      return success();
    });
  };

  execSync = function(commands) {
    return (commands.reduceRight(function(prev, current) {
      return function() {
        return exec("" + current, prev);
      };
    }, function() {}))();
  };

  main = function() {
    if (!process.env.HOME) {
      console.log("Environment variable HOME is not given. Set to '/root'");
      process.env.HOME = "/root";
    }
    return fs.access(cli, fs.constants.X_OK, function(error) {
      if (error !== null) {
        console.log(error.message);
        process.exit(1);
      }
      return checkCommandLineArguments();
    });
  };

  checkCommandLineArguments = function() {
    var resourceGroup, serviceName;
    if (process.argv.length !== 4) {
      console.log("Usage: restart.coffee <resource_group> <service_name>");
      process.exit(1);
    }
    resourceGroup = process.argv[2];
    serviceName = process.argv[3];
    return executeCommands(resourceGroup, serviceName);
  };

  executeCommands = function(resourceGroup, serviceName) {
    return execSync([cli + " config mode arm", cli + " webapp restart " + resourceGroup + " " + serviceName]);
  };

  main();

}).call(this);

//# sourceMappingURL=restart.js.map
